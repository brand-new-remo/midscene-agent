# MCP å·¥å…·å®šä¹‰ä¿®å¤æ€»ç»“

## ğŸš¨ å…³é”®é—®é¢˜å‘ç°

ç”¨æˆ·åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°äº†ä¸€ä¸ª**ä¸¥é‡é—®é¢˜**ï¼šå·¥å…·å®šä¹‰æ–‡ä»¶ä¸­å®šä¹‰äº†è®¸å¤šåœ¨çœŸå® Midscene MCP æœåŠ¡å™¨ä¸­**ä¸å­˜åœ¨çš„å·¥å…·**ï¼Œå¯¼è‡´è¿è¡Œæ—¶å‡ºç°é”™è¯¯ï¼š

```
âŒ é”™è¯¯: Tool 'midscene_get' not found - MCP error -32602
```

è¿™æ„å‘³ç€ä¹‹å‰é‡æ„æ—¶å®šä¹‰çš„ 22 ä¸ªå·¥å…·ä¸­ï¼Œæœ‰ 7 ä¸ªå·¥å…·æ˜¯**è™šæ„çš„**ï¼Œå¹¶ä¸å­˜åœ¨äºå®é™…çš„ Midscene MCP æœåŠ¡å™¨ä¸­ã€‚

## ğŸ” é—®é¢˜åˆ†æ

### å®é™…å­˜åœ¨çš„ MCP å·¥å…·
é€šè¿‡æ£€æŸ¥ Midscene MCP æœåŠ¡å™¨å’Œ MCP æ–‡æ¡£ï¼Œç¡®è®¤ä»¥ä¸‹å·¥å…·æ˜¯**çœŸå®å¯ç”¨**çš„ï¼š

#### å¯¼èˆªå·¥å…· (2ä¸ª)
- âœ… `midscene_navigate` - é¡µé¢å¯¼èˆª
- âœ… `midscene_set_active_tab` - æ ‡ç­¾é¡µåˆ‡æ¢

#### äº¤äº’å·¥å…· (6ä¸ª)
- âœ… `midscene_aiTap` - æ™ºèƒ½ç‚¹å‡»
- âœ… `midscene_aiInput` - æ™ºèƒ½è¾“å…¥
- âœ… `midscene_aiScroll` - é¡µé¢æ»šåŠ¨
- âœ… `midscene_aiKeyboardPress` - æŒ‰é”®æ“ä½œ
- âœ… `midscene_aiHover` - å…ƒç´ æ‚¬åœ
- âœ… `midscene_aiWaitFor` - æ™ºèƒ½ç­‰å¾…

#### æŸ¥è¯¢å·¥å…· (6ä¸ª)
- âœ… `midscene_aiAssert` - é¡µé¢çŠ¶æ€åˆ†æ
- âœ… `midscene_location` - è·å–é¡µé¢ä¿¡æ¯
- âœ… `midscene_screenshot` - é¡µé¢æˆªå›¾
- âœ… `midscene_get_tabs` - è·å–æ ‡ç­¾é¡µåˆ—è¡¨
- âœ… `midscene_get_screenshot` - è·å–ä¿å­˜çš„æˆªå›¾
- âœ… `midscene_get_console_logs` - è·å–æ§åˆ¶å°æ—¥å¿—

#### æµ‹è¯•å·¥å…· (1ä¸ª)
- âœ… `midscene_playwright_example` - Playwright ä½¿ç”¨ç¤ºä¾‹

### è™šæ„çš„å·¥å…·ï¼ˆå·²ç§»é™¤ï¼‰
ä»¥ä¸‹å·¥å…·åœ¨å®šä¹‰æ–‡ä»¶ä¸­å­˜åœ¨ï¼Œä½†**å®é™…ä¸å­˜åœ¨**ï¼Œå·²å…¨éƒ¨ç§»é™¤ï¼š

âŒ ~~`midscene_get`~~ - ä¸å­˜åœ¨
âŒ ~~`midscene_element`~~ - ä¸å­˜åœ¨
âŒ ~~`midscene_set`~~ - ä¸å­˜åœ¨
âŒ ~~`midscene_define`~~ - ä¸å­˜åœ¨
âŒ ~~`midscene_run`~~ - ä¸å­˜åœ¨
âŒ ~~`midscene_retrieve`~~ - ä¸å­˜åœ¨
âŒ ~~`midscene_replay`~~ - ä¸å­˜åœ¨
âŒ ~~`midscene_report`~~ - ä¸å­˜åœ¨

## âœ… ä¿®å¤æªæ–½

### 1. æ¸…ç†å·¥å…·å®šä¹‰
- **åˆ é™¤äº† 7 ä¸ªè™šæ„å·¥å…·** (`midscene_get`, `midscene_element`, `midscene_set`, `midscene_define`, `midscene_run`, `midscene_retrieve`, `midscene_replay`, `midscene_report`)
- **åˆ é™¤äº† `TOOL_CATEGORY_DATA` ç±»åˆ«**
- **æ›´æ–°äº†å·¥å…·åˆ†ç±»é…ç½®**

### 2. é‡æ–°ç»„ç»‡å·¥å…·é›†

#### åŸºç¡€å·¥å…·é›†ï¼ˆ4ä¸ªï¼‰
```python
basic = [
    "midscene_navigate",     # å¯¼èˆª
    "midscene_aiTap",        # ç‚¹å‡»
    "midscene_aiInput",      # è¾“å…¥
    "midscene_aiAssert",     # æŸ¥è¯¢
]
```

#### é«˜çº§å·¥å…·é›†ï¼ˆ12ä¸ªï¼‰
```python
advanced = [
    "midscene_navigate",          # å¯¼èˆª
    "midscene_aiTap",             # ç‚¹å‡»
    "midscene_aiInput",           # è¾“å…¥
    "midscene_aiScroll",          # æ»šåŠ¨
    "midscene_aiKeyboardPress",   # æŒ‰é”®
    "midscene_aiHover",           # æ‚¬åœ
    "midscene_aiWaitFor",         # ç­‰å¾…
    "midscene_aiAssert",          # æŸ¥è¯¢
    "midscene_location",          # é¡µé¢ä¿¡æ¯
    "midscene_screenshot",        # æˆªå›¾
    "midscene_get_tabs",          # æ ‡ç­¾é¡µ
    "midscene_set_active_tab",    # åˆ‡æ¢æ ‡ç­¾é¡µ
]
```

#### å®Œæ•´å·¥å…·é›†ï¼ˆ15ä¸ªï¼‰
åŒ…å«æ‰€æœ‰çœŸå®å¯ç”¨çš„å·¥å…·ã€‚

### 3. ä¿®å¤çš„æ–‡ä»¶

#### `src/tools/definitions.py`
- ç§»é™¤æ‰€æœ‰è™šæ„å·¥å…·å®šä¹‰
- åˆ é™¤ `TOOL_CATEGORY_DATA` ç±»åˆ«
- æ›´æ–°å·¥å…·åˆ†ç±»é…ç½®
- æ›´æ–°æ¨èå·¥å…·é›†é…ç½®

#### `src/tools/__init__.py`
- ç§»é™¤å¯¹ `TOOL_CATEGORY_DATA` çš„å¯¼å…¥

## ğŸ“Š ä¿®å¤ç»“æœå¯¹æ¯”

| æŒ‡æ ‡ | ä¿®å¤å‰ | ä¿®å¤å | å˜åŒ– |
|------|--------|--------|------|
| å®šä¹‰å·¥å…·æ€»æ•° | 22 | 15 | â¬‡ï¸ -7 |
| åŸºç¡€å·¥å…·é›† | 4 | 4 | â¡ï¸ æ— å˜åŒ– |
| é«˜çº§å·¥å…·é›† | 13 | 12 | â¬‡ï¸ -1 |
| å®Œæ•´å·¥å…·é›† | 22 | 15 | â¬‡ï¸ -7 |
| å·¥å…·åˆ†ç±»æ•° | 5 | 4 | â¬‡ï¸ -1 |
| è¿è¡Œæ—¶é”™è¯¯ | âŒ æœ‰ | âœ… æ—  | ğŸ‰ è§£å†³ |

## ğŸ¯ éªŒè¯ç»“æœ

```bash
=== å·¥å…·å®šä¹‰éªŒè¯ ===

âœ… æ€»å·¥å…·æ•°é‡: 15
âœ… åŸºç¡€å·¥å…·é›†: 4 ä¸ª
âœ… é«˜çº§å·¥å…·é›†: 12 ä¸ª
âœ… å®Œæ•´å·¥å…·é›†: 15 ä¸ª

âœ… æ‰€æœ‰å·¥å…·å‡ä¸ºçœŸå®å­˜åœ¨çš„ MCP å·¥å…·
âœ… æ™ºèƒ½ä½“å¯ä»¥æ­£å¸¸å®ä¾‹åŒ–
âœ… ä¸å†å‡ºç° "Tool not found" é”™è¯¯
```

## ğŸ›¡ï¸ é˜²æŠ¤æªæ–½

ä¸ºé¿å…ç±»ä¼¼é—®é¢˜å†æ¬¡å‘ç”Ÿï¼Œå»ºè®®ï¼š

1. **ä»…åŸºäºå®˜æ–¹æ–‡æ¡£**ï¼šåªå®šä¹‰åœ¨ Midscene å®˜æ–¹æ–‡æ¡£ä¸­æ˜ç¡®åˆ—å‡ºçš„å·¥å…·
2. **å®æ—¶éªŒè¯**ï¼šåœ¨åˆ›å»ºå·¥å…·å‰ï¼Œé€šè¿‡ `session.list_tools()` éªŒè¯å·¥å…·æ˜¯å¦çœŸå®å­˜åœ¨
3. **åˆ†å±‚ç®¡ç†**ï¼š
   - ç¬¬1å±‚ï¼šMCP æœåŠ¡å™¨å®é™…å·¥å…·
   - ç¬¬2å±‚ï¼šå£°æ˜å¼å·¥å…·å®šä¹‰ï¼ˆä¸ç¬¬1å±‚ä¸€ä¸€å¯¹åº”ï¼‰
   - ç¬¬3å±‚ï¼šå·¥å…·é›†é…ç½®ï¼ˆä»ç¬¬2å±‚ä¸­é€‰æ‹©ï¼‰

## ğŸ“ æ€»ç»“

è¿™æ¬¡ä¿®å¤è§£å†³äº†ç”¨æˆ·å‘ç°çš„å…³é”®é—®é¢˜ï¼š
- âŒ **7ä¸ªè™šæ„å·¥å…·** â†’ âœ… **å…¨éƒ¨ç§»é™¤**
- âŒ **è¿è¡Œæ—¶é”™è¯¯** â†’ âœ… **è¿è¡Œæ­£å¸¸**
- âŒ **è¯¯å¯¼æ€§å®šä¹‰** â†’ âœ… **çœŸå®å¯ç”¨**

**å½“å‰çŠ¶æ€**ï¼šæ‰€æœ‰ 15 ä¸ªå·¥å…·å‡ä¸ºçœŸå®å­˜åœ¨çš„ MCP å·¥å…·ï¼Œç³»ç»Ÿå¯ä»¥æ­£å¸¸è¿è¡Œè€Œä¸ä¼šé‡åˆ° "Tool not found" é”™è¯¯ã€‚

## ğŸ”— ç›¸å…³æ–‡ä»¶

- `src/tools/definitions.py` - å·¥å…·å®šä¹‰ï¼ˆå·²ä¿®å¤ï¼‰
- `src/tools/__init__.py` - æ¨¡å—å¯¼å‡ºï¼ˆå·²ä¿®å¤ï¼‰
- `src/mcp_wrapper.py` - MCP åŒ…è£…å™¨ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
- `src/agent.py` - æ™ºèƒ½ä½“å®ç°ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰

---

**ä¿®å¤æ—¥æœŸ**ï¼š2025-01-04
**çŠ¶æ€**ï¼šâœ… å·²å®Œæˆ
